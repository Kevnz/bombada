DGE.xhr=function(method,url,callbacks,data){var i,post,req;callbacks=(callbacks||{});try{req=new XMLHttpRequest();}catch(e){var types=['MXSML2.XMLHTTP3.0','MXSML2.XMLHTTP','Microsoft.XMLHTTP'];for(i=0;i<types.length;i++){try{req=new ActiveXObject(types[i]);break;}catch(e){}}}
req.open(method,url,true);if(method.toUpperCase()=='POST'){post='';for(i in data){if((typeof(data[i])=='object')&&data[i].length){for(var a=0;a<data[i].length;a++){post+=printf('%[]=%&',i,encodeURIComponent(data[i][a]));}}else{post+=printf('%=%&',i,encodeURIComponent(data[i]));}}
req.setRequestHeader('Content-Type','application/x-www-form-urlencoded; charset=UTF-8');}else{req.setRequestHeader('Content-Type','application/x-javascript');}
req.onreadystatechange=function(){if(req.readyState==4){if(callbacks.complete)callbacks.complete(req);if(req.status==200){if(callbacks.success)callbacks.success(req);}else if(req.status==404){if(callbacks.error)callbacks.error(req);}}};req.send(post||null);return DGE;};