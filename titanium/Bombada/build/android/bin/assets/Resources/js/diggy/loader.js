DGE.Loader=function(assets,callbacks){callbacks=(callbacks||{});var dateStart=new Date();var dateStop;var fetched=0;var files=[];var total=0;function init(){for(var i=0;i<assets.length;i++){var asset=assets[i];if(typeof(asset)=='string'){files.push(asset);}else if(asset.length===undefined){for(var k in asset){files.push(asset[k]);}}else{for(var n=0;n<asset.length;n++){files.push(asset[n]);}}}
total=files.length;for(var i=0;i<total;i++){var img=new Image();img.onload=increment;img.onerror=function(e){if(callbacks.error)callbacks.error(e);increment();};img.src=(DGE.conf.baseUrl+files[i]);}};function increment(){fetched++;if(callbacks.change)callbacks.change(Math.round((fetched/total)*100));if(fetched==total){dateStop=new Date();if(callbacks.complete)callbacks.complete();}};this.time=function(){return((dateStop||new Date()).getTime()-dateStart.getTime());};init();};